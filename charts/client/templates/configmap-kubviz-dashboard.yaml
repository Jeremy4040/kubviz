{{- if .Values.dashboards.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "client.fullname" . }}-kubviz-dashboard
  annotations:
    grafana_folder: "Kubviz"
  labels:
    {{ .Values.dashboards.label }}: {{ .Values.dashboards.labelValue | quote }}
data:
  kubviz.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 32,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays all the names of the cluster monitoring the kubernetes events and features",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "mode": "lcd",
                  "type": "gauge"
                },
                "filterable": true,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 14,
            "x": 0,
            "y": 0
          },
          "id": 48,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT DISTINCT ClusterName FROM default.events",
              "rawQuery": "SELECT DISTINCT ClusterName FROM default.events",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Monitoring Clusters",
          "type": "table"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the which cluster has the highest events.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 10,
            "x": 14,
            "y": 0
          },
          "id": 52,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "/.*/",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName,count(*) AS Events From default.events\nWHERE $timeFilterByColumn(EventTime) \nGROUP BY ClusterName\nORDER BY Events DESC\nLIMIT 1",
              "rawQuery": "SELECT ClusterName,count(*) AS Events From default.events\nWHERE EventTime >= toDateTime(1693460315) AND EventTime <= toDateTime(1693460615) \nGROUP BY ClusterName\nORDER BY Events DESC\nLIMIT 1",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Clusters with Most Activity",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 9,
            "w": 13,
            "x": 0,
            "y": 6
          },
          "id": 72,
          "options": {
            "baidu": {
              "callback": "bmapReady",
              "key": ""
            },
            "editor": {
              "format": "auto",
              "height": 600
            },
            "gaode": {
              "key": "",
              "plugin": "AMap.Scale,AMap.ToolBar"
            },
            "getOption": "// Check if data.series exists\nif (data.series && data.series.length > 0) {\n  const reasons = data.series[0].fields[0].values;\n  const kinds = data.series[0].fields[1].values;\n  const eventTimes = data.series[0].fields[2].values;\n\n  // Create nodes and links\n  const nodes = [];\n  const links = [];\n\n  reasons.forEach((reason, index) => {\n    const sourceNode = {\n      name: reason,\n      category: 0, // Category for source nodes\n      symbolSize: 60, // Size for source nodes\n    };\n\n    const kindNode = {\n      name: kinds[index],\n      category: 1, // Category for kind nodes\n      symbolSize: 40, // Size for kind nodes\n    };\n\n    const eventTimeNode = {\n      name: eventTimes[index],\n      category: 2, // Category for eventTime nodes\n      symbolSize: 20, // Size for eventTime nodes\n    };\n\n    // Ensure source, kind, and eventTime nodes are unique before adding them\n    if (!nodes.some((node) => node.name === sourceNode.name)) {\n      nodes.push(sourceNode);\n    }\n\n    if (!nodes.some((node) => node.name === kindNode.name)) {\n      nodes.push(kindNode);\n    }\n\n    if (!nodes.some((node) => node.name === eventTimeNode.name)) {\n      nodes.push(eventTimeNode);\n    }\n\n    // Create links between reason, kind, and eventTime nodes\n    links.push({\n      source: reason,\n      target: kinds[index],\n    });\n\n    links.push({\n      source: kinds[index],\n      target: eventTimes[index],\n    });\n  });\n\n  // Create categories for nodes\n  const categories = [\n    {\n      name: 'Reasons',\n    },\n    {\n      name: 'Nodes',\n    },\n    {\n      name: 'Event Times',\n    },\n  ];\n\n  // Create ECharts option\n  const option = {\n    tooltip: {\n      trigger: 'item',\n      formatter: '{b}',\n    },\n    legend: {\n      x: 'left',\n      data: ['Reasons', 'Nodes', 'Event Times'],\n    },\n    series: [\n      {\n        type: 'graph',\n        layout: 'circular',\n        roam: true,\n        label: {\n          show: true,\n          textStyle: {\n            color: '#000',\n          },\n        },\n        force: {\n          repulsion: 100,\n          gravity: 0.1,\n          edgeLength: 150,\n        },\n        data: nodes,\n        links: links,\n        draggable: true,\n        categories: categories,\n        edgeSymbol: [\"none\", \"arrow\"],\n        edgeSymbolSize: [12, 12],\n        lineStyle: {\n          color: \"#000000\",\n          curveness: 0,\n          opacity: 0.3,\n        },\n      },\n    ],\n  };\n\n  // Return the ECharts option\n  return option;\n} else {\n  // Handle the case when data.series does not exist\n  return {};\n}",
            "google": {
              "callback": "gmapReady",
              "key": ""
            },
            "map": "none",
            "renderer": "canvas",
            "themeEditor": {
              "config": "{}",
              "height": 400,
              "name": "default"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT Reason, Host, EventTime\nFROM default.events\nWHERE Kind IN ('Node') AND Reason IN ('NodeNotReady')",
              "rawQuery": "SELECT Reason, Host, EventTime\nFROM default.events\nWHERE Kind IN ('Node') AND Reason IN ('NodeNotReady')",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "NodeNotReady Events for Nodes",
          "type": "volkovlabs-echarts-panel"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 9,
            "w": 11,
            "x": 13,
            "y": 6
          },
          "id": 70,
          "options": {
            "baidu": {
              "callback": "bmapReady",
              "key": ""
            },
            "editor": {
              "format": "auto",
              "height": 600
            },
            "gaode": {
              "key": "",
              "plugin": "AMap.Scale,AMap.ToolBar"
            },
            "getOption": "let kind = [];\nlet resources = [];\n\ndata.series.map((s) => {\n  kind = s.fields.find((f) => f.name === 'Kind').values;\n  resources = s.fields.find((f) => f.name === 'Resources').values;\n});\n\n// Create an empty array to store doughnut chart data\nconst doughnutChartData = [];\n\n// Define colors for doughnut slices\nconst doughnutSliceColors = ['#235894', '#FFFF00', '#FF0000', '#00FF00', '#FFA500'];\n\n// Map severity and counts to doughnut chart data\nkind.forEach((kinddata, index) => {\n  doughnutChartData.push({\n    value: resources[index],\n    name: kinddata,\n    itemStyle: {\n      borderRadius: [10, 10, 10, 10], // Add rounded corners\n      color: doughnutSliceColors[index % doughnutSliceColors.length],\n      borderWidth: 2,\n      borderColor: '#fff',\n    },\n  });\n});\n\nreturn {\n  backgroundColor: '#FFFFFF', // Set the background color to white\n  tooltip: {\n    trigger: 'item',\n  },\n  legend: {\n    top: '5%',\n    left: 'center',\n  },\n  series: [\n    {\n      name: 'Access From',\n      type: 'pie',\n      radius: ['40%', '70%'],\n      avoidLabelOverlap: false,\n      label: {\n        show: false,\n        position: 'center',\n      },\n      emphasis: {\n        label: {\n          show: true,\n          fontSize: 40,\n          fontWeight: 'bold',\n        },\n      },\n      labelLine: {\n        show: false,\n      },\n      data: doughnutChartData, // Use the modified doughnut chart data\n    },\n  ],\n};",
            "google": {
              "callback": "gmapReady",
              "key": ""
            },
            "map": "none",
            "renderer": "canvas",
            "themeEditor": {
              "config": "{}",
              "height": 400,
              "name": "default"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, Kind, count(Resource) AS Resources\nFROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime) AND Kind In ('Deployment','Job','Secret', 'ConfigMap', 'Service')\nGROUP BY  ClusterName, Kind",
              "rawQuery": "SELECT ClusterName, Kind, count(Resource) AS Resources\nFROM default.getall_resources\nWHERE EventTime >= toDateTime(1698841487) AND EventTime <= toDateTime(1698927887) AND Kind In ('Deployment','Job','Secret', 'ConfigMap', 'Service')\nGROUP BY  ClusterName, Kind",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Resource Distribution",
          "type": "volkovlabs-echarts-panel"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "hue",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 0,
            "y": 15
          },
          "id": 69,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "time_series",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": " SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE $timeFilterByColumn(EventTime) AND Kind = 'Pod' AND Reason = 'Created'\n    GROUP BY EventTime, Kind, Reason",
              "rawQuery": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE EventTime >= toDateTime(1698839664) AND EventTime <= toDateTime(1698926064) AND Kind = 'Pod' AND Reason = 'Created'\n    GROUP BY EventTime, Kind, Reason",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            },
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "time_series",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "hide": false,
              "intervalFactor": 1,
              "query": " SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE $timeFilterByColumn(EventTime) AND Kind = 'Pod' AND Reason = 'BackOff'\n    GROUP BY EventTime, Kind, Reason",
              "rawQuery": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE EventTime >= toDateTime(1698839664) AND EventTime <= toDateTime(1698926064) AND Kind = 'Pod' AND Reason = 'BackOff'\n    GROUP BY EventTime, Kind, Reason",
              "refId": "B",
              "round": "0s",
              "skip_comments": true
            },
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "time_series",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "hide": false,
              "intervalFactor": 1,
              "query": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE $timeFilterByColumn(EventTime) AND Kind = 'Pod' AND Reason = 'NodeNotReady'\n    GROUP BY EventTime, Kind, Reason",
              "rawQuery": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE EventTime >= toDateTime(1698839664) AND EventTime <= toDateTime(1698926064) AND Kind = 'Pod' AND Reason = 'NodeNotReady'\n    GROUP BY EventTime, Kind, Reason",
              "refId": "C",
              "round": "0s",
              "skip_comments": true
            },
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "time_series",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "hide": false,
              "intervalFactor": 1,
              "query": " SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE $timeFilterByColumn(EventTime) AND Kind = 'Pod' AND Reason = 'Scheduled'\n    GROUP BY EventTime, Kind, Reason",
              "rawQuery": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE EventTime >= toDateTime(1698839664) AND EventTime <= toDateTime(1698926064) AND Kind = 'Pod' AND Reason = 'Scheduled'\n    GROUP BY EventTime, Kind, Reason",
              "refId": "D",
              "round": "0s",
              "skip_comments": true
            },
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "time_series",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "hide": false,
              "intervalFactor": 1,
              "query": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE $timeFilterByColumn(EventTime) AND Kind = 'Pod' AND Reason = 'FailedScheduling'\n    GROUP BY EventTime, Kind, Reason",
              "rawQuery": "SELECT EventTime, Kind, Reason, count(*) as total_count\n    FROM default.events\n    WHERE EventTime >= toDateTime(1698839664) AND EventTime <= toDateTime(1698926064) AND Kind = 'Pod' AND Reason = 'FailedScheduling'\n    GROUP BY EventTime, Kind, Reason",
              "refId": "E",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Pod Events by Reason Over Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Age"
                },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "mode": "lcd",
                      "type": "gauge"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 12,
            "x": 12,
            "y": 15
          },
          "id": 71,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, Resource, Age\nFROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT ClusterName, Resource, Age\nFROM default.getall_resources\nWHERE EventTime >= toDateTime(1696336208) AND EventTime <= toDateTime(1698928208)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Resource Details by Cluster and Age",
          "type": "table"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of outdated images from all cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 0,
            "y": 22
          },
          "id": 18,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*)\n\nFROM default.outdated_images\n\nWHERE $timeFilterByColumn(EventTime) AND VersionsBehind > 0",
              "rawQuery": "SELECT count(*)\n\nFROM default.outdated_images\n\nWHERE EventTime >= toDateTime(1695283225) AND EventTime <= toDateTime(1695369625) AND VersionsBehind > 0",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Outdated Images Across All Clusters",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of events from all cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 5,
            "y": 22
          },
          "id": 20,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) ",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693460292) AND EventTime <= toDateTime(1693460592)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Events across all Clusters",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of DeletedAPIs from all the cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 10,
            "y": 22
          },
          "id": 22,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.DeletedAPIs\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT count(*) FROM default.DeletedAPIs\nWHERE EventTime >= toDateTime(1695367863) AND EventTime <= toDateTime(1695369663)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of DeletedAPIs across all Clusters",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of DeprecatedAPIs in all cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 15,
            "y": 22
          },
          "id": 24,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.DeprecatedAPIs\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT count(*) FROM default.DeprecatedAPIs\nWHERE EventTime >= toDateTime(1695367882) AND EventTime <= toDateTime(1695369682)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of DeprecatedAPIs across all Clusters",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "Thos panel displays the total count of resources running in all kubernetes cluster.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 4,
            "x": 20,
            "y": 22
          },
          "id": 26,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT count(*) FROM default.getall_resources\nWHERE EventTime >= toDateTime(1695367909) AND EventTime <= toDateTime(1695369709)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of k8s_Resources across all Clusters",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "ClickHouse"
          },
          "description": "This panel provides a time-based analysis of the occurrences of 'Pod'",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisGridShow": true,
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "always",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 13,
            "x": 0,
            "y": 26
          },
          "id": 53,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-clickhouse-datasource",
                "uid": "ClickHouse"
              },
              "format": 0,
              "meta": {
                "builderOptions": {
                  "fields": [],
                  "limit": 100,
                  "mode": "list"
                }
              },
              "queryType": "sql",
              "rawSql": "SELECT EventTime, COUNT(*) AS Pods\nFROM default.events\nWHERE Kind = 'Pod'\nGROUP BY EventTime;\n",
              "refId": "A",
              "selectedFormat": 0
            }
          ],
          "title": "Number of Pods over time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "grafana-clickhouse-datasource",
            "uid": "ClickHouse"
          },
          "description": "This panel provides a time-based analysis of the occurrences of 'Node'",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "yellow",
                "mode": "fixed"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 13,
            "y": 26
          },
          "id": 65,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "grafana-clickhouse-datasource",
                "uid": "ClickHouse"
              },
              "format": 0,
              "meta": {
                "builderOptions": {
                  "fields": [],
                  "limit": 100,
                  "mode": "list"
                }
              },
              "queryType": "sql",
              "rawSql": "SELECT EventTime, COUNT(*) AS Nodes\nFROM default.events\nWHERE Kind = 'Node'\nGROUP BY EventTime;\n",
              "refId": "A",
              "selectedFormat": 0
            }
          ],
          "title": "Number of Nodes over Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count events related to Pod.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "#249b6a",
                "mode": "fixed"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 0,
            "y": 32
          },
          "id": 57,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "value"
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Pod'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693438853) AND EventTime <= toDateTime(1693460453) AND Kind IN 'Pod'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Pod creation events",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of pods with Created state.",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 6,
            "y": 32
          },
          "id": 63,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Pod' AND Reason IN 'Created'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693460172) AND EventTime <= toDateTime(1693460472) AND Kind IN 'Pod' AND Reason IN 'Created'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of pods with Created state",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of pods with backOff state.",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 12,
            "y": 32
          },
          "id": 61,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Pod' AND Reason IN 'BackOff'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693460182) AND EventTime <= toDateTime(1693460482) AND Kind IN 'Pod' AND Reason IN 'BackOff'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of pods with BackOff state",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of pods with Unhealthy state.",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 32
          },
          "id": 62,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Pod' AND Reason IN 'Unhealthy'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693460193) AND EventTime <= toDateTime(1693460493) AND Kind IN 'Pod' AND Reason IN 'Unhealthy'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of pods with Unhealthy state",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count events related to node.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "#249b6a",
                "mode": "fixed"
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 0,
            "y": 36
          },
          "id": 56,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "value"
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Node'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693438754) AND EventTime <= toDateTime(1693460354) AND Kind IN 'Node'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Node creation events",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of nodes which is in not ready state",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 6,
            "y": 36
          },
          "id": 58,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Node' AND Reason IN 'NodeNotReady'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693438784) AND EventTime <= toDateTime(1693460384) AND Kind IN 'Node' AND Reason IN 'NodeNotReady'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Nodes with NotReady State",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of nodes which is in ready state",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 12,
            "y": 36
          },
          "id": 59,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Node' AND Reason IN 'NodeReady'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693438825) AND EventTime <= toDateTime(1693460425) AND Kind IN 'Node' AND Reason IN 'NodeReady'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Nodes with Ready State",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of nodes which is in NodeHasNoDiskPressure state",
          "fieldConfig": {
            "defaults": {
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 36
          },
          "id": 60,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(*) FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Node' AND Reason IN 'NodeHasNoDiskPressure'",
              "rawQuery": "SELECT count(*) FROM default.events\nWHERE EventTime >= toDateTime(1693438835) AND EventTime <= toDateTime(1693460435) AND Kind IN 'Node' AND Reason IN 'NodeHasNoDiskPressure'",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Nodes with  NodeHasNoDiskPressure State",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of events per cluster seperated by namespace.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "light-yellow",
                    "value": 80
                  },
                  {
                    "color": "light-red",
                    "value": 150
                  },
                  {
                    "color": "semi-dark-red",
                    "value": 1000
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Events"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 425
                  },
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "mode": "gradient",
                      "type": "gauge",
                      "valueDisplayMode": "text"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 40
          },
          "id": 44,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, Namespace, count(Event) AS Events FROM default.events\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName,Namespace\nORDER BY Events DESC",
              "rawQuery": "SELECT ClusterName, Namespace, count(Event) AS Events FROM default.events\nWHERE EventTime >= toDateTime(1693460424) AND EventTime <= toDateTime(1693460724)\nGROUP BY ClusterName,Namespace\nORDER BY Events DESC",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Events per cluster by Namespace",
          "type": "table"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of clusters containing DeletedAPIs activity.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 0,
            "y": 48
          },
          "id": 66,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT COUNT(DISTINCT ClusterName) AS DeletedAPIs\nFROM default.DeletedAPIs\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT COUNT(DISTINCT ClusterName) AS DeletedAPIs\nFROM default.DeletedAPIs\nWHERE EventTime >= toDateTime(1695369491) AND EventTime <= toDateTime(1695369791)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Clusters Containing DeletedAPIs Activity",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of clusters containing Outdated Images activity.",
          "fieldConfig": {
            "defaults": {
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 8,
            "y": 48
          },
          "id": 68,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT count(DISTINCT(ClusterName)) AS OutdatedImages\nFROM default.outdated_images\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT count(DISTINCT(ClusterName)) AS OutdatedImages\nFROM default.outdated_images\nWHERE EventTime >= toDateTime(1695369518) AND EventTime <= toDateTime(1695369818)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Clusters Containing Outdated Images Activity",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number of clusters containing DeprecatedAPIs activity.",
          "fieldConfig": {
            "defaults": {
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "orange",
                    "value": 70
                  },
                  {
                    "color": "red",
                    "value": 85
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 8,
            "x": 16,
            "y": 48
          },
          "id": 67,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT COUNT(DISTINCT ClusterName) AS DeprecatedAPIs\nFROM default.DeprecatedAPIs\nWHERE $timeFilterByColumn(EventTime)",
              "rawQuery": "SELECT COUNT(DISTINCT ClusterName) AS DeprecatedAPIs\nFROM default.DeprecatedAPIs\nWHERE EventTime >= toDateTime(1695369535) AND EventTime <= toDateTime(1695369835)",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Number of Clusters Containing DeprecatedAPIs Activity",
          "type": "gauge"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of pods grouped by reason.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "continuous-GrYlRd"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Pods"
                },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "mode": "lcd",
                      "type": "gauge",
                      "valueDisplayMode": "text"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 53
          },
          "id": 64,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, Reason, count(Kind) AS Pods FROM default.events\nWHERE $timeFilterByColumn(EventTime) AND Kind IN 'Pod' \nGROUP BY ClusterName,Reason",
              "rawQuery": "SELECT ClusterName, Reason, count(Kind) AS Pods FROM default.events\nWHERE EventTime >= toDateTime(1695369559) AND EventTime <= toDateTime(1695369859) AND Kind IN 'Pod' \nGROUP BY ClusterName,Reason",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of Pods grouped by Reason",
          "type": "table"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of DeprecatedAPIs for each clusters respectively.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "light-green",
                "mode": "fixed"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "fillOpacity": 80,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 61
          },
          "id": 34,
          "options": {
            "barRadius": 0.2,
            "barWidth": 0.3,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "always",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, count(Deprecated) AS DeprecatedAPIs FROM default.DeprecatedAPIs\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName",
              "rawQuery": "SELECT ClusterName, count(Deprecated) AS DeprecatedAPIs FROM default.DeprecatedAPIs\nWHERE EventTime >= toDateTime(1695369580) AND EventTime <= toDateTime(1695369880)\nGROUP BY ClusterName",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of DeprecatedAPIs per cluster",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of DeletedAPIs form each clusters respectively.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "light-green",
                "mode": "fixed"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "fillOpacity": 80,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 61
          },
          "id": 36,
          "options": {
            "barRadius": 0.2,
            "barWidth": 0.3,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "always",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, count(Deleted) AS DeletedAPIs FROM default.DeletedAPIs\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName",
              "rawQuery": "SELECT ClusterName, count(Deleted) AS DeletedAPIs FROM default.DeletedAPIs\nWHERE EventTime >= toDateTime(1695369607) AND EventTime <= toDateTime(1695369907)\nGROUP BY ClusterName",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of DeletedAPIs per cluster",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of outdated images from each cluster respectively.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "light-green",
                "mode": "fixed"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "fillOpacity": 80,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 70
          },
          "id": 28,
          "options": {
            "barRadius": 0.2,
            "barWidth": 0.3,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "always",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, count(CurrentImage) AS Outdated_Images FROM default.outdated_images\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName",
              "rawQuery": "SELECT ClusterName, count(CurrentImage) AS Outdated_Images FROM default.outdated_images\nWHERE EventTime >= toDateTime(1695369627) AND EventTime <= toDateTime(1695369927)\nGROUP BY ClusterName",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of Outdated Images per cluster",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of Events for each cluster respectively",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "fillOpacity": 80,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 70
          },
          "id": 32,
          "options": {
            "barRadius": 0.2,
            "barWidth": 0.3,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "always",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "select ClusterName,count(Id) AS Events from default.events\nWHERE $timeFilterByColumn(EventTime) \ngroup by ClusterName",
              "rawQuery": "select ClusterName,count(Id) AS Events from default.events\nWHERE EventTime >= toDateTime(1693460253) AND EventTime <= toDateTime(1693460553) \ngroup by ClusterName",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of Events per cluster",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total count of resources for each clusters respectively",
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "light-green",
                "mode": "fixed"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "fillOpacity": 80,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 70
          },
          "id": 30,
          "options": {
            "barRadius": 0.2,
            "barWidth": 0.3,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "auto",
            "showValue": "always",
            "stacking": "none",
            "tooltip": {
              "mode": "single",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, count(Resource) AS Resources FROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName",
              "rawQuery": "SELECT ClusterName, count(Resource) AS Resources FROM default.getall_resources\nWHERE EventTime >= toDateTime(1695369653) AND EventTime <= toDateTime(1695369953)\nGROUP BY ClusterName",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": "Count of Resources per cluster",
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "description": "This panel displays the total number resources for each Clusters seperated by Kind.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "center",
                "cellOptions": {
                  "type": "color-text"
                },
                "filterable": true,
                "inspect": false
              },
              "links": [],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "light-yellow",
                    "value": 100
                  },
                  {
                    "color": "semi-dark-red",
                    "value": 200
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Resources"
                },
                "properties": [
                  {
                    "id": "custom.cellOptions",
                    "value": {
                      "mode": "gradient",
                      "type": "gauge",
                      "valueDisplayMode": "text"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 78
          },
          "id": 42,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true
          },
          "pluginVersion": "10.0.3",
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "dateTimeType": "DATETIME",
              "extrapolate": true,
              "format": "table",
              "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
              "intervalFactor": 1,
              "query": "SELECT ClusterName, Kind, count(Resource) AS Resources FROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime)\nGROUP BY ClusterName,Kind\nORDER BY Resources DESC",
              "rawQuery": "SELECT ClusterName, Kind, count(Resource) AS Resources FROM default.getall_resources\nWHERE EventTime >= toDateTime(1695369674) AND EventTime <= toDateTime(1695369974)\nGROUP BY ClusterName,Kind\nORDER BY Resources DESC",
              "refId": "A",
              "round": "0s",
              "skip_comments": true
            }
          ],
          "title": " Resources per Cluster by Kind",
          "type": "table"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 85
          },
          "id": 16,
          "panels": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "description": "This panel displays all the resources running in the kubernetes cluster.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "center",
                    "cellOptions": {
                      "type": "color-text"
                    },
                    "filterable": true,
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 16,
                "w": 24,
                "x": 0,
                "y": 110
              },
              "id": 14,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              },
              "pluginVersion": "10.0.3",
              "targets": [
                {
                  "datasource": {
                    "type": "vertamedia-clickhouse-datasource",
                    "uid": "{{ .Values.datasources.uid }}"
                  },
                  "dateTimeType": "DATETIME",
                  "extrapolate": true,
                  "format": "table",
                  "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
                  "intervalFactor": 1,
                  "query": "SELECT * FROM default.getall_resources\nWHERE $timeFilterByColumn(EventTime)",
                  "rawQuery": "SELECT * FROM default.getall_resources\nWHERE EventTime >= toDateTime(1695369699) AND EventTime <= toDateTime(1695369999)",
                  "refId": "A",
                  "round": "0s",
                  "skip_comments": true
                }
              ],
              "title": "Kubernetes Resources",
              "transparent": true,
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "refId": "A"
            }
          ],
          "title": "Kubernetes Resources",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 86
          },
          "id": 12,
          "panels": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "description": "This panel displays all the out-of-date images from the cluster.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "center",
                    "cellOptions": {
                      "type": "color-text"
                    },
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 10
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 16,
                "w": 24,
                "x": 0,
                "y": 127
              },
              "id": 10,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              },
              "pluginVersion": "10.0.3",
              "targets": [
                {
                  "datasource": {
                    "type": "vertamedia-clickhouse-datasource",
                    "uid": "{{ .Values.datasources.uid }}"
                  },
                  "dateTimeType": "DATETIME",
                  "extrapolate": true,
                  "format": "table",
                  "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
                  "intervalFactor": 1,
                  "query": "SELECT * FROM default.outdated_images\nWHERE $timeFilterByColumn(EventTime) AND VersionsBehind > 0",
                  "rawQuery": "SELECT * FROM default.outdated_images\nWHERE EventTime >= toDateTime(1695369722) AND EventTime <= toDateTime(1695370022) AND VersionsBehind > 0",
                  "refId": "A",
                  "round": "0s",
                  "skip_comments": true
                }
              ],
              "title": "Outdated Images",
              "transparent": true,
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "refId": "A"
            }
          ],
          "title": "Outdated Images",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 87
          },
          "id": 8,
          "panels": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "description": "This panel displays all the DeletedAPIs from the cluster.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "center",
                    "cellOptions": {
                      "type": "color-text"
                    },
                    "filterable": true,
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 11,
                "w": 24,
                "x": 0,
                "y": 112
              },
              "id": 6,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              },
              "pluginVersion": "10.0.3",
              "targets": [
                {
                  "datasource": {
                    "type": "vertamedia-clickhouse-datasource",
                    "uid": "{{ .Values.datasources.uid }}"
                  },
                  "dateTimeType": "DATETIME",
                  "extrapolate": true,
                  "format": "table",
                  "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
                  "intervalFactor": 1,
                  "query": "SELECT * FROM default.DeletedAPIs\nWHERE $timeFilterByColumn(EventTime)",
                  "rawQuery": "SELECT * FROM default.DeletedAPIs\nWHERE EventTime >= toDateTime(1695369749) AND EventTime <= toDateTime(1695370049)",
                  "refId": "A",
                  "round": "0s",
                  "skip_comments": true
                }
              ],
              "title": "DeletedAPIs",
              "transparent": true,
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "refId": "A"
            }
          ],
          "title": "DeletedAPIs",
          "type": "row"
        },
        {
          "collapsed": true,
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "{{ .Values.datasources.uid }}"
          },
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 88
          },
          "id": 4,
          "panels": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "description": "This panel displays all the DeprecatedAPIs from the cluster.",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "custom": {
                    "align": "center",
                    "cellOptions": {
                      "type": "color-text"
                    },
                    "filterable": true,
                    "inspect": false
                  },
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green"
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  }
                },
                "overrides": []
              },
              "gridPos": {
                "h": 8,
                "w": 24,
                "x": 0,
                "y": 113
              },
              "id": 2,
              "options": {
                "cellHeight": "sm",
                "footer": {
                  "countRows": false,
                  "fields": "",
                  "reducer": [
                    "sum"
                  ],
                  "show": false
                },
                "showHeader": true
              },
              "pluginVersion": "10.0.3",
              "targets": [
                {
                  "datasource": {
                    "type": "vertamedia-clickhouse-datasource",
                    "uid": "{{ .Values.datasources.uid }}"
                  },
                  "dateTimeType": "DATETIME",
                  "extrapolate": true,
                  "format": "table",
                  "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
                  "intervalFactor": 1,
                  "query": "SELECT * FROM default.DeprecatedAPIs\nWHERE $timeFilterByColumn(EventTime)",
                  "rawQuery": "SELECT * FROM default.DeprecatedAPIs\nWHERE EventTime >= toDateTime(1695369773) AND EventTime <= toDateTime(1695370073)",
                  "refId": "A",
                  "round": "0s",
                  "skip_comments": true
                }
              ],
              "title": "DeprecatedAPIs",
              "transparent": true,
              "type": "table"
            }
          ],
          "targets": [
            {
              "datasource": {
                "type": "vertamedia-clickhouse-datasource",
                "uid": "{{ .Values.datasources.uid }}"
              },
              "refId": "A"
            }
          ],
          "title": "DeprecatedAPIs",
          "type": "row"
        }
      ],
      "refresh": "",
      "schemaVersion": 38,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-24h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Kubviz Dashboard",
      "uid": "eT4fox94z",
      "version": 1,
      "weekStart": ""
    }
{{- end }}